/**
 * @param  {Array} urls Array of url objects
 * @param  {Object} app Application object
 * @return {function}
 */
var urls = module.exports = function(urls, app) {
	var _urls = urls;
	var _length = _urls.length;

	for (var i = 0; i < _length; i++ ) {
	    var url = _urls[i];

        if(!url.methods || url.methods.length === 0) {
            app.get(url.pattern, url.view);
        } else {
            for(var m=0; m< url.methods.length; m++) {
                var method = url.methods[m];

                switch (method) {
                    case "get":
                        app.get(url.pattern, url.view);
                        break;
                    case "post":
                        app.post(url.pattern, url.view);
                        break;
                    case "put":
                        app.put(url.pattern, url.view);
                        break;
                    case "delete":
                        app.delete(url.pattern, url.view);
                        break;
                }
            }
        }
	};

	/**
	 * Create template helper, so user can user "url name" and get the url
	 */
	app.locals.url = function(name) {
	    for ( var i = 0; i < _length; i++ ) {
	        var url = _urls[i];
	        if ( url.name === name ) {
                //the string befor :id
                var urlBase = url.pattern.split(':');
	            return urlBase[0].toString();
	        }
	    };
	};

}
